extends base
block headLink 
  link(rel='stylesheet' href='/css/signup.css')
  link(rel='preconnect' href='https://fonts.googleapis.com')
  link(rel='preconnect' href='https://fonts.gstatic.com' crossorigin='')
  link(rel='icon' href='/img/logos/logo.png')
  link(href='https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css' rel='stylesheet' integrity='sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH' crossorigin='anonymous')

block content
  main
    p Log in to your account
    .div-form
      style.
        .div-form {
          margin: 3vh auto;
        }
      form.form-parent
        .form-group
          label(for='email') Email address
          input#email.form-control(type='email', aria-describedby='emailHelp', placeholder='Enter email')
        .form-group
          label(for='password') Password
          input#password.form-control(type='password', placeholder='Password')
        button.btn.btn-primary#login-btn(type='button') Submit
    script(src='https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js' integrity='sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz' crossorigin='anonymous')
    script(type='module' src='https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js')
    script(nomodule='' src='https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js')   
    script(type='module').
      document.getElementById('login-btn').addEventListener('click', async () => {
        const email = document.getElementById('email').value;
        const password = document.getElementById('password').value;
        const response = await fetch('/api/v1/users/login', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify({ email, password })
        });
        const data = await response.json();
        console.log(data);
        if (data.status === 'success') {
          // Handle successful login (e.g., redirect to another page)
          window.location.href = '/views/blogs';
        } else {
          // Handle error (e.g., show error message)
          alert(data.message);
        }
      });
